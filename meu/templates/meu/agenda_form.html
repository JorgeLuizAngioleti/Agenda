{% extends 'meu/base.html' %}
{% block title %} Form {% endblock%}
{% load bootstrap %}
{% load widget_tweaks %}
{% block main  %}

{% if user.is_authenticated %}
	<h3>Agende sua aula   {{ user.username }}!</h3>
<form action="" method="POST" enctype="multipart/form-data">
	{%csrf_token%}
	<div class="form-group">
		<label for="{{form.eletronico.id_for_label}}">Tecnologia selecionada</label>
		{{form.eletronico|add_class:"form-control"|attr:'readonly'}}
	</div>
	<div class="form-group">
		<label for="{{form.data.id_for_label}}">Data</label>
		{{form.data|add_class:"form-control"|attr:'readonly'}}
	</div>
<h4>Selecione as aulas disponíveis abaixo:</h4>
<div class="p-3 mb-2 bg-success text-white">
	<script>

	 function marcarTodos(marcar){

        if(marcar){
            document.getElementById('acao').innerHTML = 'ok';
            if(document.getElementById("a1")){
			document.getElementById('a1').checked = true;}
			if(document.getElementById("a2")){
			document.getElementById('a2').checked = true;
			if(document.getElementById("a3")){
			document.getElementById('a3').checked = true;
			if(document.getElementById("a4")){
			document.getElementById('a4').checked = true;
			if(document.getElementById("a5")){
			document.getElementById('a5').checked = true;
			if(document.getElementById("a6")){
			document.getElementById('a6').checked = true;
	 }}}}}}}

	function marcarTodos2(marcar){

        if(marcar){
            document.getElementById('acao2').innerHTML = 'ok';
            if(document.getElementById("b1")){
			document.getElementById('b1').checked = true;}
			if(document.getElementById("b2")){
			document.getElementById('b2').checked = true;
			if(document.getElementById("b3")){
			document.getElementById('b3').checked = true;
			if(document.getElementById("b4")){
			document.getElementById('b4').checked = true;
			if(document.getElementById("b5")){
			document.getElementById('b5').checked = true;
			if(document.getElementById("b6")){
			document.getElementById('b6').checked = true;
	 }}}}}}}

		function marcarTodos3(marcar){

        if(marcar){
            document.getElementById('acao3').innerHTML = 'ok';
            if(document.getElementById("c1")){
			document.getElementById('c1').checked = true;}
			if(document.getElementById("c2")){
			document.getElementById('c2').checked = true;
			if(document.getElementById("c3")){
			document.getElementById('c3').checked = true;
			if(document.getElementById("c4")){
			document.getElementById('c4').checked = true;
			if(document.getElementById("c5")){
			document.getElementById('c5').checked = true;
			if(document.getElementById("c6")){
			document.getElementById('c6').checked = true;
	 }}}}}}}
	</script>

	<h2><b>Matutino</b>
       {%if permicao  or user.is_superuser%}<input type="checkbox"  onclick="marcarTodos(this.checked);">
        <span id="acao">Marcar todas</span> <br>{%endif%}
        <input type="checkbox" id="a1" name="m1" value="True" style="width:3%; height:3%"><x id='e1'>1ª aula</x>
		<input type="checkbox" id="a2" name="m2" value="True" style="width:3%; height:3%"><x id='e2'>2ª aula</x>
		<input type="checkbox" id="a3" name="m3" value="True" style="width:3%; height:3%"><x id='e3'>3ª aula</x>
		<input type="checkbox" id="a4" name="m4" value="True" style="width:3%; height:3%"><x id='e4'>4ª aula</x>
		<input type="checkbox" id="a5" name="m5" value="True" style="width:3%; height:3%"><x id='e5'>5ª aula</x>
		<input type="checkbox" id="a6" name="m6" value="True" style="width:3%; height:3%"><x id='e6'>6ª aula</x>
</div>

<div class="p-3 mb-2 bg-info text-white">
	<h2><b>Vespertino</b>
		{%if permicao or user.is_superuser%}<input type="checkbox"  onclick="marcarTodos2(this.checked);">
        <span id="acao2">Marcar todas</span> <br>{%endif%}
        <input type="checkbox" id="b1" name="v1" value="True" style="width:3%; height:3%"><x id='f1'>1ª aula</x>
		<input type="checkbox" id="b2" name="v2" value="True" style="width:3%; height:3%"><x id='f2'>2ª aula</x>
		<input type="checkbox" id="b3" name="v3" value="True" style="width:3%; height:3%"><x id='f3'>3ª aula</x>
		<input type="checkbox" id="b4" name="v4" value="True" style="width:3%; height:3%"><x id='f4'>4ª aula</x>
		<input type="checkbox" id="b5" name="v5" value="True" style="width:3%; height:3%"><x id='f5'>5ª aula</x>
		<input type="checkbox" id="b6" name="v6" value="True" style="width:3%; height:3%"><x id='f6'>6ª aula</x>
	</h2>
</div>
<div class="p-3 mb-2 bg-warning text-dark">
	<h2><b>Noturno</b>
		{%if permicao or user.is_superuser%}<input type="checkbox"  onclick="marcarTodos3(this.checked);">
        <span id="acao3">Marcar todas</span> <br>{%endif%}
        <input type="checkbox" id="c1" name="n1" value="True" style="width:3%; height:3%"><x id='g1'>1ª aula</x>
		<input type="checkbox" id="c2" name="n2" value="True" style="width:3%; height:3%"><x id='g2'>2ª aula</x>
		<input type="checkbox" id="c3" name="n3" value="True" style="width:3%; height:3%"><x id='g3'>3ª aula</x>
		<input type="checkbox" id="c4" name="n4" value="True" style="width:3%; height:3%"><x id='g4'>4ª aula</x>
		<input type="checkbox" id="c5" name="n5" value="True" style="width:3%; height:3%"><x id='g5'>5ª aula</x>
	</h2>
</div>
<!-- Javascript abaixo que retira os checkbox que já foram agendados deixando em "hidden" invisivel-->
	 {%for p in pes%}
<script>
/*matutino*/
     if('{{p.get_aula_display}}' == '1ª aula matutino'){
            document.getElementById("a1").style.visibility = "hidden";
            document.getElementById("a1").disabled = true;
			document.getElementById("e1").innerText = '';
       }

     if('{{p.get_aula_display}}' == '2ª aula matutino'){
            document.getElementById("a2").style.visibility = "hidden";
            document.getElementById("a2").disabled = true;
			document.getElementById("e2").innerText = '';
       }
     if('{{p.get_aula_display}}' == '3ª aula matutino'){
            document.getElementById("a3").style.visibility = "hidden";
            document.getElementById("a3").disabled = true;
			document.getElementById("e3").innerText = '';
       }
     if('{{p.get_aula_display}}' == '4ª aula matutino'){
            document.getElementById("a4").style.visibility = "hidden";
            document.getElementById("a4").disabled = true;
			document.getElementById("e4").innerText = '';
       }
     if('{{p.get_aula_display}}' == '5ª aula matutino'){
            document.getElementById("a5").style.visibility = "hidden";
            document.getElementById("a5").disabled = true;
			document.getElementById("e5").innerText = '';
       }
     if('{{p.get_aula_display}}' == '6ª aula matutino'){
            document.getElementById("a6").style.visibility = "hidden";
            document.getElementById("a6").disabled = true;
			document.getElementById("e6").innerText = '';
       }

/*vespertino*/

     if('{{p.get_aula_display}}' == '1ª aula vespertino'){
            document.getElementById("b1").style.visibility = "hidden";
            document.getElementById("b1").disabled = true;
			document.getElementById("f1").innerText = '';
       }

     if('{{p.get_aula_display}}' == '2ª aula vespertino'){
            document.getElementById("b2").style.visibility = "hidden";
            document.getElementById("b2").disabled = true;
			document.getElementById("f2").innerText = '';
       }
     if('{{p.get_aula_display}}' == '3ª aula vespertino'){
            document.getElementById("b3").style.visibility = "hidden";
            document.getElementById("b3").disabled = true;
			document.getElementById("f3").innerText = '';
       }
     if('{{p.get_aula_display}}' == '4ª aula vespertino'){
            document.getElementById("b4").style.visibility = "hidden";
            document.getElementById("b4").disabled = true;
			document.getElementById("f4").innerText = '';
       }
     if('{{p.get_aula_display}}' == '5ª aula vespertino'){
            document.getElementById("b5").style.visibility = "hidden";
            document.getElementById("b5").disabled = true;
			document.getElementById("f5").innerText = '';
       }
     if('{{p.get_aula_display}}' == '6ª aula vespertino'){
            document.getElementById("b6").style.visibility = "hidden";
            document.getElementById("b6").disabled = true;
			document.getElementById("f6").innerText = '';
       }


/*noturno*/

     if('{{p.get_aula_display}}' == '1ª aula noturno'){
            document.getElementById("c1").style.visibility = "hidden";
            document.getElementById("c1").disabled = true;
			document.getElementById("g1").innerText = '';
       }

     if('{{p.get_aula_display}}' == '2ª aula noturno'){
            document.getElementById("c2").style.visibility = "hidden";
            document.getElementById("c2").disabled = true;
			document.getElementById("g2").innerText = '';
       }
     if('{{p.get_aula_display}}' == '3ª aula noturno'){
            document.getElementById("c3").style.visibility = "hidden";
            document.getElementById("c3").disabled = true;
			document.getElementById("g3").innerText = '';
       }
     if('{{p.get_aula_display}}' == '4ª aula noturno'){
            document.getElementById("c4").style.visibility = "hidden";
            document.getElementById("c4").disabled = true;
			document.getElementById("g4").innerText = '';
       }
     if('{{p.get_aula_display}}' == '5ª aula noturno'){
            document.getElementById("c5").style.visibility = "hidden";
            document.getElementById("c5").disabled = true;
			document.getElementById("g5").innerText = '';
       }

    </script>
	{%endfor%}

	{%if  user.is_superuser %}
	<div class="form-group">
		<label for="{{form.data.id_for_label}}">Nome</label>
		{{form.nome|add_class:"form-control"}}
	</div>
	<div class="form-group">
		<label for="{{form.escola.id_for_label}}">Escola</label>
		{{form.escola|add_class:"form-control"|attr:'readonly'}}
	</div>
	<div class="form-group">
		<label for="{{form.tema.id_for_label}}">Tema</label>
		{{form.tema|add_class:"form-control"|attr:'value:tema aqui'}}
	</div>
	<div class="form-group">
		<label for="{{form.objetivo.id_for_label}}">Objetivo</label>
		{{form.objetivo|add_class:"form-control"}}
	</div>
	{% else %}
	<div class="form-group">
		<label for="{{form.data.id_for_label}}">Nome</label>
		{{form.nome|add_class:"form-control"|attr:'readonly'}}
	</div>
	<div class="form-group">
		<label for="{{form.escola.id_for_label}}">Escola</label>
		{{form.escola|add_class:"form-control"|attr:'readonly'}}
	</div>
	<div class="form-group">
		<label for="{{form.tema.id_for_label}}">Tema</label>
		{{form.tema|add_class:"form-control"}}
	</div>
	<div class="form-group">
		<label for="{{form.objetivo.id_for_label}}">Objetivo</label>
		{{form.objetivo|add_class:"form-control"}}
	</div>
	{% endif %}
	<button type="submit" class="btn btn-success">Salvar</button>
</form>
{%else%}
<h1>Você não está logado!</h1>
<a href="{%url 'login' %}" class="btn btn-danger" >Login</a>
{% endif %}
{% endblock %}